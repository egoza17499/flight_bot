import os
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ .env (–µ—Å–ª–∏ –µ—Å—Ç—å)
load_dotenv()

# ========== TELEGRAM BOT ==========
# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
BOT_TOKEN = os.getenv("BOT_TOKEN")

# ========== ADMIN SETTINGS ==========
# ID –≥–ª–∞–≤–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–∑–∞—â–∏—â–µ–Ω –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è)
# –í–∞—à ID: 393293807
ADMIN_ID = int(os.getenv("ADMIN_ID", "393293807"))

# ========== DATABASE (Neon.tech) ==========
# –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
# –§–æ—Ä–º–∞—Ç: postgresql://user:password@host/dbname?sslmode=require
DSN = os.getenv("DSN")

# ========== RENDER SETTINGS ==========
# –ü–æ—Ä—Ç –¥–ª—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (health check)
PORT = int(os.getenv("PORT", 8080))

# ========== LOGGING ==========
# –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL = os.getenv("LOG_LEVEL", "INFO")

# ========== –ü–†–û–í–ï–†–ö–ò ==========
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω—ã
if not BOT_TOKEN:
    raise ValueError("‚ùå BOT_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω! –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Render.")

if not DSN:
    raise ValueError("‚ùå DSN –Ω–µ –Ω–∞–π–¥–µ–Ω! –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.")

# ========== –ò–ù–§–û–†–ú–ê–¶–ò–Ø ==========
# –í–µ—Ä—Å–∏—è –±–æ—Ç–∞
BOT_VERSION = "1.2.0"

# –ù–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞
BOT_NAME = "81 –ø–æ–ª–∫ –í–¢–ê - –£—á–µ—Ç –ª–∏—á–Ω–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∞"

# –í–ª–∞–¥–µ–ª—å—Ü—ã (—Å–ø–∏—Å–æ–∫ ID –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏)
OWNERS = [
    ADMIN_ID,  # –ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
    # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤:
    # 123456789,
    # 987654321,
]

def is_owner(user_id):
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º"""
    return user_id in OWNERS

# ========== –ù–ê–°–¢–†–û–ô–ö–ò –°–õ–£–ñ–ï–ë–ù–´–ï ==========
# –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å–µ—Å—Å–∏–∏ FSM (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
FSM_TIMEOUT = 3600  # 1 —á–∞—Å

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –≤–≤–æ–¥–∞
MAX_INPUT_ATTEMPTS = 3

# –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∫ API Telegram (—Å–µ–∫—É–Ω–¥—ã)
TELEGRAM_RATE_LIMIT = 0.1

# ========== –ë–ê–ó–ê –î–ê–ù–ù–´–• ==========
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ –ë–î
DB_POOL_SIZE = 10

# –¢–∞–π–º–∞—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î (—Å–µ–∫—É–Ω–¥—ã)
DB_TIMEOUT = 30

# ========== –ü–õ–ê–ù–ò–†–û–í–©–ò–ö (APSCHEDULER) ==========
# –í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–µ–¥–ª–∞–π–Ω–æ–≤ (–∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤)
SCHEDULER_CHECK_INTERVAL = 6 * 60 * 60

# –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
SCHEDULER_TIMEZONE = "Europe/Moscow"

# ========== –û–¢–õ–ê–î–ö–ê ==========
# –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ (True/False)
DEBUG = os.getenv("DEBUG", "False").lower() == "true"

# ========== –ü–†–ò–í–ï–¢–°–¢–í–ò–ï ==========
START_MESSAGE = """
üëã –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é!

–Ø –±–æ—Ç –¥–ª—è —É—á–µ—Ç–∞ –ª–∏—á–Ω–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∞ 81 –ø–æ–ª–∫–∞ –í–¢–ê.

üìã <b>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</b>
‚Ä¢ –£—á–µ—Ç —Å—Ä–æ–∫–æ–≤ –í–õ–ö, –£–ú–û, –ö–ë–ü
‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚Ä¢ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∞—ç—Ä–æ–¥—Ä–æ–º–æ–≤
‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–µ—Ç–æ–≤ –Ω–∞ –ø–æ–ª–µ—Ç—ã

–ù–∞–∂–º–∏—Ç–µ /start –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã.
"""

# ========== –ö–û–ù–¢–ê–ö–¢–´ ==========
# –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Å–≤—è–∑–∏ —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º
SUPPORT_CONTACT = "@your_username"  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à username
